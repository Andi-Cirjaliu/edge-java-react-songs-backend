(this.webpackJsonpjava_frontend=this.webpackJsonpjava_frontend||[]).push([[0],{33:function(e,t,n){e.exports=n(63)},60:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),l=n.n(c),o=n(11),s=n(2),i=function(e){var t=e.title,n=e.icon;return r.a.createElement("div",{className:"navbar bg-primary"},r.a.createElement("h1",null,r.a.createElement("i",{className:n}),t),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/test"},"Test Endpoints")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/about"},"About"))))};i.defaultProps={title:"Java REST API Demo",icon:"fas fa-podcast"};var u=i,m=n(1),p=n.n(m),E=n(7),d=n(4),f=n(15),g=n.n(f),v=Object(a.createContext)(),b=n(5),h=function(e,t){switch(console.log("current state: ",e,"action: ",t),t.type){case"FETCH_SONGS":return Object(b.a)(Object(b.a)({},e),{},{songs:t.payload,loading:!1});case"RATE_SONG":var n=t.payload,a=e.songs.map((function(e){return e.id===n.id?n:e}));return Object(b.a)(Object(b.a)({},e),{},{songs:a,loading:!1});case"SET_LOADING":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"SET_ERROR":return Object(b.a)(Object(b.a)({},e),{},{loading:!1,error:t.payload});case"CLEAR_ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:null});default:return e}};console.log("NODE_ENV: ","production");var O,R=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"http://localhost:9080/java_sample",REACT_APP_RELATIVE_API_URI:"java_sample",REACT_APP_RUN_INSIDE_BACKEND:"true"}),_=R.REACT_APP_API_URL,y=R.REACT_APP_RUN_INSIDE_BACKEND,j=R.REACT_APP_RELATIVE_API_URI;console.log("REACT_APP_API_URL: ",_,", REACT_APP_RUN_INSIDE_BACKEND: ",y,", REACT_APP_RELATIVE_API_URI: ",j),"true"===y?(console.log("Use current location ",window.location.href),(O=window.location.href).endsWith("/")||(O+="/"),O+=j):(console.log("The application runs outside backend. Use ",_),O=_),console.log("Backend URL: ",O);var N=function(e){var t=Object(a.useReducer)(h,{songs:[],loading:!1,error:null}),n=Object(d.a)(t,2),c=n[0],l=n[1],o=function(){var e=Object(E.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetch songs..."),u(),e.prev=2,e.next=5,g.a.get("".concat(O,"/v1/songs"));case 5:return t=e.sent,n=t.data,console.log(n),l({type:"FETCH_SONGS",payload:n.songs}),e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0.response),m(e.t0.response?e.t0.response.data.msg:e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(E.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("rate song ",t," rating ",n),u(),e.prev=2,e.next=5,g.a.put("".concat(O,"/v1/songs/").concat(t),{rating:n},{headers:{"Content-Type":"application/json"}});case 5:return a=e.sent,r=a.data,console.log(r),l({type:"RATE_SONG",payload:r}),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0.response),m(e.t0.response?e.t0.response.data.msg:e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(E.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetch metrics..."),u(),e.prev=2,e.next=5,g.a.get("".concat(O,"/metrics"));case 5:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0.response),m(e.t0.response?e.t0.response.data.msg:e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),u=function(){l({type:"SET_LOADING"})},m=function(e){l({type:"SET_ERROR",payload:e}),setTimeout((function(){return f()}),5e3)},f=function(){l({type:"CLEAR_ERROR"})};return r.a.createElement(v.Provider,{value:{songs:c.songs,loading:c.loading,error:c.error,fetchSongs:o,rateSong:s,setError:m,fetchMetrics:i}},e.children)},S=function(e){var t=e.index,n=e.isOn,a=e.hoverRatingStar,c=e.clickRatingStar;return r.a.createElement("span",{onMouseEnter:function(e){a(t)},onClick:function(e){c(t)}},r.a.createElement("i",{className:"".concat(n?"fas":"far"," fa-star")}))};var T=function(e){var t=e.id,n=e.rating,c=e.votes,l=Object(a.useState)([!1,!1,!1,!1,!1]),o=Object(d.a)(l,2),s=o[0],i=o[1],u=Object(a.useState)(0),m=Object(d.a)(u,2),p=m[0],E=m[1],f=Object(a.useContext)(v).rateSong,g=function(e){p>0||i(s.map((function(t,n){return e>=n})))},b=function(e){if(p>0)return alert("You already rated this song! You can rate it again after 15 seconds!");E(e+1),f(t,e+1),setTimeout((function(){return h()}),15e3)},h=function(){E(0)},O=new Intl.NumberFormat("en",{maximumFractionDigits:1}).format(n);return r.a.createElement("div",null,r.a.createElement("span",null,"Rating ",O," from ",c," votes"),r.a.createElement("span",{style:{paddingLeft:"10px",paddingRight:"10px",fontWeight:"bold"}},"|"),r.a.createElement("span",{onMouseLeave:function(e){p>0||i([!1,!1,!1,!1,!1])}},r.a.createElement("span",{style:{paddingRight:"10px"}},"Rate"),s.map((function(e,t){return r.a.createElement(S,{key:t,index:t,isOn:e,hoverRatingStar:g,clickRatingStar:b})}))))},x=function(e){var t=e.song,n=t.id,c=t.title,l=t.artist,o=t.url,s=t.votes,i=t.rating,u=Object(a.useState)(!1),m=Object(d.a)(u,2),p=m[0],E=m[1];return r.a.createElement("div",null,r.a.createElement("h4",{style:{fontSize:"20px",marginBottom:"3px",lineHeight:1.3}},r.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",style:p?{textDecoration:"underline"}:{textDecoration:"none"},onMouseEnter:function(){return E(!0)},onMouseOut:function(){return E(!1)}},l," - ",c)),r.a.createElement(T,{id:n,rating:i,votes:s}))},A=function(e){var t=Object(a.useContext)(v),n=t.songs,c=t.fetchSongs;return Object(a.useEffect)((function(){c()}),[]),n?r.a.createElement(a.Fragment,null,r.a.createElement("h1",{style:{marginTop:"20px",marginBottom:"20px",textAlign:"center"}},"Top Songs On Youtube"),r.a.createElement("div",{className:"grid-2"},n.map((function(e){return r.a.createElement(x,{key:e.id,song:e})})))):r.a.createElement("div",null,"No songs were found.")},C=function(e){var t=Object(a.useState)(null),n=Object(d.a)(t,2),c=n[0],l=n[1],o=Object(a.useContext)(v).fetchSongs,s=function(){var e=Object(E.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:n=e.sent,l(JSON.stringify(n,null,2));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("h3",null,"Fetch all songs"),r.a.createElement("p",null,"Endpoint: java_sample/v1/songs"),r.a.createElement("p",null,"Method: GET"),r.a.createElement("p",null,"Result type: JSON"),r.a.createElement("div",{className:"py-1"},r.a.createElement("button",{onClick:s,className:"btn btn-primary"},"Try it"),c&&r.a.createElement("button",{onClick:i,className:"btn btn-light"},"Clear"))),c&&r.a.createElement("div",null,r.a.createElement("h4",{className:"py-1"},"Result"),r.a.createElement("div",null,c)))},P=n(14),w=function(e){var t=Object(a.useState)({id:0,rating:0}),n=Object(d.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(null),s=Object(d.a)(o,2),i=s[0],u=s[1],m=Object(a.useContext)(v).rateSong,f=function(e){l(Object(b.a)(Object(b.a)({},c),{},Object(P.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(E.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(c.id,c.rating);case 3:n=e.sent,u(JSON.stringify(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Rate song"),r.a.createElement("p",null,"Endpoint: java_sample/v1/songs/:id"),r.a.createElement("p",null,"Method: PUT"),r.a.createElement("p",{className:"list"},"Parameters:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Name: id, type: integer, required: true"),r.a.createElement("li",null,"Name: rating, type: integer, required: true")),r.a.createElement("p",null,"Result type: JSON"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"id"},"Id"),r.a.createElement("input",{type:"text",name:"id",value:c.id,onChange:f,placeholder:"id"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"rating"},"Rating"),r.a.createElement("input",{type:"text",name:"rating",value:c.rating,onChange:f,placeholder:"rating"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:g,className:"btn btn-primary"},"Try it"),i&&r.a.createElement("button",{type:"reset",onClick:h,className:"btn btn-light"},"Clear"))),i&&r.a.createElement("div",null,r.a.createElement("h4",{className:"py-1"},"Result"),r.a.createElement("div",null,i)))},I=function(e){var t=Object(a.useState)(null),n=Object(d.a)(t,2),c=n[0],l=n[1],o=Object(a.useContext)(v).fetchMetrics,s=function(){var e=Object(E.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:n=e.sent,l(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("h3",null,"Get songs metrics"),r.a.createElement("p",null,"Endpoint: java_sample/metrics"),r.a.createElement("p",null,"Method: GET"),r.a.createElement("p",null,"Result type: text"),r.a.createElement("div",{className:"py-1"},r.a.createElement("button",{onClick:s,className:"btn btn-primary"},"Try it"),c&&r.a.createElement("button",{onClick:i,className:"btn btn-light"},"Clear"))),c&&r.a.createElement("div",null,r.a.createElement("h4",{className:"py-1"},"Result"),r.a.createElement("div",null,c)))},k=function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(C,null),r.a.createElement("hr",{className:"m-2"}),r.a.createElement(w,null),r.a.createElement("hr",{className:"m-2"}),r.a.createElement(I,null),r.a.createElement("div",{className:"m-2"}))},D=function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"my-2"},"This Java application creates a REST Service that exposes a few endpoints to the clients.",r.a.createElement("p",null,"On the ",r.a.createElement(o.b,{to:"/"},"Home page")," you can see a demonstration of using this REST Service in a client application. The client application is build using React."),r.a.createElement("p",null,"In addition, the REST Service provides full support for integrating with Prometheus and Grafana."),r.a.createElement("p",null,"To see and test the exposed endpoints of the REST Service click on"," ",r.a.createElement(o.b,{to:"/test"},"Test Endpoints"),".")))};n(60);var L=function(){return r.a.createElement(N,null,r.a.createElement(o.a,null,r.a.createElement(u,null),r.a.createElement("div",{className:"container"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0,component:A}),r.a.createElement(s.a,{path:"/test",exact:!0,component:k}),r.a.createElement(s.a,{path:"/about",exact:!0,component:D})))))},U=n(32);n.n(U).a.config(),console.log("API URL: ","http://localhost:9080/java_sample"),l.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.2fd743c3.chunk.js.map